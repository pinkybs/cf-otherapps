<?xml version="1.0" encoding="UTF-8" ?>
<Module>
    <ModulePrefs title="Chome Board" description="Chome Board" author="Community Factory Inc." author_link="http://communityfactory.com"> 
        <Require feature="opensocial-0.8" />
        <Require feature="dynamic-height" />
        <Require feature="flash" />
        <Require feature="views" />
        <Optional feature="content-rewrite">
            <Param name="expires">86400</Param>
            <Param name="include-urls"></Param>
            <Param name="exclude-urls">.*</Param>
        </Optional>
    </ModulePrefs>

    <Content type="html" view="canvas">
    <![CDATA[
       <script type="text/javascript" src="http://static.mixi.communityfactory.net/cmn/js/mixios.canvas-1.0-min.js?v=1.1"></script>
     
       <script type="text/javascript">
           var canvas = mixios.application.newCanvas('http://mixi.communityfactory.net', 'chomeboard');
           //default debug is disabled
           //canvas.enableDebug(true);
           //default height is 800
           //canvas.setHeight(1700);
          
           //let's go
           canvas.start();
       </script>
    ]]>
    </Content>

    <Content type="html" view="home, profile">
    <![CDATA[   
        <style type="text/css">
        * {
            margin:0;
            padding:0;
            border:none;
        }
        </style>
        
        <script type="text/javascript" src="http://static.mixi.communityfactory.net/cmn/js/mixios.gadget.js"></script>
    
        <script type="text/javascript">        
            var gadget = mixios.application.newGadget('http://mixi.communityfactory.net', 'chomeboard');
            //gadget.enableDebug(true);
            
            gadget.registerOnLoadHandler(embedFlash);
            
            function embedFlash() {
                var opt = {
                    id : 'chomeboard',
                    flashvars : 'gadgetURL=' + gadget.getHost() + '/ajax/openchomeboard/gadgetload',
                    allowScriptAccess: 'always',
                    height: 210,
                    width: 210,
                    allowFullScreen : false
                };
    
                gadgets.flash.embedFlash('http://static.mixi.communityfactory.net/apps/chomeboard/swf/gadget.swf?verson=2', gadget.getContainerId(), 8.0, opt);
            }

			function getUserID() {
			    return gadget.getOwnerId() + '*' + gadget.getViewerId();
			}
            
            //start
            gadget.start();
        </script>
    ]]>
    </Content>
</Module>
